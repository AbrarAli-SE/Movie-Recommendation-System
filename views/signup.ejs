<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Login Page</title>
    <link rel="stylesheet" href="/css/signup.css"> <!-- Use absolute path for the stylesheet -->
</head>

<body>
    <div class="container">
        <div class="account-text">
            <h1>Create New Account</h1>
            <p>Already Registered? <a href="login">Login</a></p>
        </div>
        <div class="login-box">
            <h2>Sign Up</h2>
            <form id="signupForm" action="signup" method="POST">
                <div class="input-field">
                    <input type="text" id="name" placeholder="NAME" required>
                </div>
                <div class="input-field email">
                    <input type="email" id="email" placeholder="EMAIL" required>
                    <button type="button" id="sendOTP">Send OTP</button>
                </div>
                <div class="input-field">
                    <input type="password" id="password" placeholder="PASSWORD" required>
                </div>
                <div id="otp-section" class="otp-section hidden">
                    <label for="otp">OTP</label>
                    <div class="otp-inputs">
                        <input type="text" maxlength="1" class="otp-input">
                        <input type="text" maxlength="1" class="otp-input">
                        <input type="text" maxlength="1" class="otp-input">
                        <input type="text" maxlength="1" class="otp-input">
                        <input type="text" maxlength="1" class="otp-input">
                    </div>
                </div>
                <button type="submit" class="signup-button">Sign Up</button>
            </form>
        </div>
    </div>

    <script>
        const sendOTPButton = document.getElementById('sendOTP');
        const otpSection = document.getElementById('otp-section');
        const nameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const otpInputs = document.querySelectorAll('.otp-input');
        const signUpButton = document.querySelector('.signup-button');

        // Function to validate fields and manage button states
        function validateFields() {
            const isNameFilled = nameInput.value.trim() !== '';
            const isEmailFilled = emailInput.value.includes('@');
            const isPasswordFilled = passwordInput.value.trim() !== '';

            sendOTPButton.disabled = !(isNameFilled && isEmailFilled);
            signUpButton.disabled = !(isNameFilled && isEmailFilled && isPasswordFilled);

            // Highlight missing fields
            nameInput.classList.toggle('error', !isNameFilled);
            emailInput.classList.toggle('error', !isEmailFilled);
            passwordInput.classList.toggle('error', !isPasswordFilled);
        }

        // Event listener for Send OTP button
        sendOTPButton.addEventListener('click', () => {
            validateFields();
            if (nameInput.value.trim() && emailInput.value.includes('@')) {
                otpSection.classList.remove('hidden'); // Show OTP section
            }
        });

        // Add input event listeners for validation
        nameInput.addEventListener('input', validateFields);
        emailInput.addEventListener('input', validateFields);
        passwordInput.addEventListener('input', validateFields);

        // Handle input for OTP fields
        otpInputs.forEach((input, index) => {
            input.addEventListener('input', () => {
                if (input.value.length === 1 && index < otpInputs.length - 1) {
                    otpInputs[index + 1].focus(); // Move to the next input
                }
            });

            input.addEventListener('keydown', (e) => {
                if (e.key === 'Backspace' && input.value === '' && index > 0) {
                    otpInputs[index - 1].focus(); // Move to the previous input
                }
            });
        });

        // Handle form submission
        document.getElementById('signupForm').addEventListener('submit', (event) => {
            event.preventDefault(); // Prevent default form submission
            const isOTPValid = Array.from(otpInputs).every(input => input.value.trim() !== '');
            if (!isOTPValid) {
                otpInputs.forEach(input => input.classList.add('error')); // Highlight OTP fields if invalid
                return; // Stop submission
            }
            // If valid, proceed with form submission logic here
            console.log('Form submitted successfully!'); // Replace with actual submission
            // You can add an AJAX request to submit the form data here
            // For example: 
            // const formData = new FormData(event.target);
            // fetch(event.target.action, { method: 'POST', body: formData });
        });
    </script>
</body>
</html>
